
## Технический стек
Frontend:
* langauge: TypeScript
* environment: NodeJS
* web-library: React
* ui-kit: Tailwind + Shadcn
* validation: zod
* unit-testing: jest

Backend:
* language: TypeScript
* environment: NodeJs
* framework: NestJs
* db: MongoDb Atlas
* cache: Redis
* unit-testing: jest

Deployment:
* server: Ubuntu
* containers: Docker

## Структура монорепозитория
Проект реализован в формате **monorepo**, где фронтенд и бэкенд находятся в едином репозитории:

**Тип архитектуры**: *Client-Server*
####  **Frontend**  
**Путь**: `pet-market/pet-market-frontend/`
- Отвечает за пользовательский интерфейс.
- Взаимодействует с сервером через REST API.
####  **Backend**  
**Путь**: `pet-market/pet-market-backend/`
- Реализует бизнес-логику, авторизацию и работу с базой данных.
- API структурированы по REST-принципу.
- Модули разделены по зонам ответственности (аутентификация, пользователи, товары и т.д.).
####  **Api**  
**Путь**: `pet-market/api/`
- Описаны все маршруты доступные на backend

---

##  Авторизация и Аутентификация

Используется библиотека **passport.js** совместно с **JWT** (JSON Web Token).

#### Как работает авторизация:

1. **Регистрация / Вход**
   - При входе/регистрации пользователь получает JWT access-токен и refresh-токен.
   - Access-токен используется для доступа к защищённым маршрутам, refresh — для его обновления.
   - Время жизни access - 15 минут, refresh - 7 дней

2. **Public-декоратор**
   - Нужные маршруты (например, login или register) помечаются специальным **Public-декоратором**.
   - Это означает, что они доступны без авторизации.

3. **Role-декоратор**
   - Для ограничения доступа по ролям используется **Role-декоратор**.
   - Примеры ролей: `user`, `admin`, `seller`.
   - Роуты проверяют наличие соответствующей роли у пользователя и отказывают в доступе при её отсутствии.

4. **Refresh токен**
   - При истечении срока действия access-токена можно отправить refresh-токен на соответствующий эндпоинт.
   - Сервер проверяет refresh-токен и выдает новую пару access/refresh токенов.

5. **Logout**
   - Logout удаляет refresh-токен из базы данных.
   - После logout текущие токены становятся недействительными, и пользователь должен пройти повторную аутентификацию.

6. **Обработка ошибок**
   - Все используемые ошибки стандартизированы и описаны в  **Bruno**

---

## Дополнительно

- Все секреты, ключи JWT, URL базы данных и другие параметры конфигурации хранятся в `.env` файле.